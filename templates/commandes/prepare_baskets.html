{% extends "base.html" %}
{% load i18n %}
{% block main %}

{# Delivery identification #}
<div class="container">
  <div class="row">
    <div class="col">
      <h3 class="m-4 text-right">{{ delivery.location }}</h3>
    </div>
    <div class="col">
      <h3 class="m-4 text-left">{{ delivery.slot_date }}</h3>
    </div>
  </div>
</div>

{# This delivery's baskets #}
<table class="table table-stripped">
  <thead>
    <tr>
      <th scope="col">{% trans "Customer" %}</th>
      <th scope="col">{% trans "Items count" %}</th>
      <th scope="col">{% trans "Status" %}</th>
      <th scope="col">{% trans "Action" %}</th>
    </tr>
  </thead>
  <tbody>
    {% for cart in delivery.get_active_carts %}
    <tr>
      <td>{{ cart.user.get_full_name }}</td>
      <td>{{ cart.items.count }}</td>
      <td>{{ cart.get_status_display }}</td>
      <td>
        {% if cart.is_prepared %}
        <form action="" method="post">
          {% csrf_token %}
          <input type="hidden" name="delivered_cart" value="{{Â cart.id }}">
          <input type="submit" class="btn btn-primary" value="{% trans "Deliver" %}">
        </form>
        {% else %}
        <a href="{% url "prepare_basket" cart.id%}" class="btn btn-primary">{% trans "Prepare" %}</a>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
